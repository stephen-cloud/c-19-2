


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://stephen-cloud.github.io/c-19-autobody/authentication/">
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Authentication UI - C-19 Autobody Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#add-authentication-to-apptsx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://stephen-cloud.github.io/c-19-autobody/" title="C-19 Autobody Documentation" class="md-header-nav__button md-logo" aria-label="C-19 Autobody Documentation">
      
  <img src="../assets/ic_build_white_48dp.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            C-19 Autobody Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Authentication UI
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        What's all this then?
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../tools/" class="md-tabs__link">
          Set things up
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../navigation/" class="md-tabs__link">
          Make UI starter
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../amplify/" class="md-tabs__link md-tabs__link--active">
          Make back-end starter
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../prepare-ui/" class="md-tabs__link">
          Connect the UI
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../awesome-table/" class="md-tabs__link">
          Make the table great
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../nope.md" class="md-tabs__link">
          DevOps
        </a>
      
    </li>
  

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../thanks/" class="md-tabs__link">
          Fine print
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://stephen-cloud.github.io/c-19-autobody/" title="C-19 Autobody Documentation" class="md-nav__button md-logo" aria-label="C-19 Autobody Documentation">
      
  <img src="../assets/ic_build_white_48dp.png" alt="logo">

    </a>
    C-19 Autobody Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="What's all this then?" class="md-nav__link">
      What's all this then?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Set things up
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Set things up" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Set things up
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tools/" title="Install the tools" class="md-nav__link">
      Install the tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create-project/" title="Create the project" class="md-nav__link">
      Create the project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../material/" title="Add React Material" class="md-nav__link">
      Add React Material
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Make UI starter
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Make UI starter" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Make UI starter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../navigation/" title="Add navigation" class="md-nav__link">
      Add navigation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Make back-end starter
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Make back-end starter" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Make back-end starter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../amplify/" title="Add AWS Amplify" class="md-nav__link">
      Add AWS Amplify
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Authentication UI
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Authentication UI" class="md-nav__link md-nav__link--active">
      Authentication UI
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-authentication-to-apptsx" class="md-nav__link">
    Add authentication to App.tsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-a-login-screen-for-react-material" class="md-nav__link">
    Make a login screen for React Material
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-the-hosted-federated-login" class="md-nav__link">
    Use the hosted federated login
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Connect the UI
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Connect the UI" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Connect the UI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare-ui/" title="Prepare the UI" class="md-nav__link">
      Prepare the UI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../add-table-view/" title="Add a table" class="md-nav__link">
      Add a table
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../connect-to-backend/" title="Connect to the back-end" class="md-nav__link">
      Connect to the back-end
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Make the table great
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Make the table great" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Make the table great
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../awesome-table/" title="Material Table" class="md-nav__link">
      Material Table
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reusable-table/" title="Make table reusable" class="md-nav__link">
      Make table reusable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../use-reusable-table/" title="Create the rest of the screens" class="md-nav__link">
      Create the rest of the screens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../add-relations/" title="Add model relationships" class="md-nav__link">
      Add model relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../table-polish/" title="Polish" class="md-nav__link">
      Polish
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      DevOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DevOps" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        DevOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../nope.md" title="Deploy to the cloud" class="md-nav__link">
      Deploy to the cloud
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nope.md" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Fine print
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Fine print" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Fine print
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../thanks/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../release-notes/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-authentication-to-apptsx" class="md-nav__link">
    Add authentication to App.tsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-a-login-screen-for-react-material" class="md-nav__link">
    Make a login screen for React Material
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-the-hosted-federated-login" class="md-nav__link">
    Use the hosted federated login
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                  <h1>Authentication UI</h1>
                
                <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Authentication is a bit of a sticky wicket.</p>
<p>You basically have two choices</p>
<ul>
<li>Use the provided authentication workflow</li>
<li>Use federated social login with a hosted UI</li>
</ul>
<p>The provided authentication UI with sing-in/up is hard to theme to look ike it's part of the application. The federated hosted UI is pretty good, except I'm not going to assume you can create applications for the OAuth callbacks in Google Cloud or Facebook.</p>
<p>Proceed with that in mind, or just skip to the next section. </p>
</div>
<p>Amplify Authentication provides almost all we need out of the box.</p>
<ul>
<li>Sign up with OTP</li>
<li>Sign in</li>
<li>Forgot password</li>
</ul>
<p>See <a href="https://docs.amplify.aws/lib/auth/getting-started/q/platform/js">https://docs.amplify.aws/lib/auth/getting-started/q/platform/js</a> for details. But it basically comes dow th the following.</p>
<p>It's just the standard UI is all orange, which is the standard Amplify theme. Luckily for us, the awesome folks at AWS Amplify have a pretty solid set of reusable React components and a board Auth API. Let's dig in.</p>
<h2 id="add-authentication-to-apptsx">Add authentication to <code>App.tsx</code><a class="headerlink" href="#add-authentication-to-apptsx" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">withAuthenticator</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@aws-amplify/ui-react&#39;</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="kr">export</span> <span class="k">default</span> <span class="nx">withAuthenticator</span><span class="p">(</span><span class="nx">App</span><span class="p">);</span>
</code></pre></div>


<p>Try it.</p>
<p><img alt="Ugly sign in" src="../assets/screenshots/ugly-signin.png" /></p>
<p>Ugly for so many reasons. But it doesn't no work. You can sign up and sign in!</p>
<p>We need to sign out. Let's try.</p>
<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">withAuthenticator</span><span class="p">,</span> <span class="nx">AmplifySignOut</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@aws-amplify/ui-react&#39;</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="o">&lt;</span><span class="nx">Toolbar</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Typography</span> <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;h4&quot;</span> <span class="o">&gt;</span><span class="nx">Welcome</span> <span class="nx">to</span> <span class="nx">C</span><span class="o">-</span><span class="mi">19</span> <span class="nx">Autobody</span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
    <span class="o">&lt;</span><span class="nx">AmplifySignOut</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/Toolbar&gt;</span>
</code></pre></div>


<p><img alt="Ugly sign out" src="../assets/screenshots/ugly-sign-out.png" /></p>
<p>Let's fix it by calling the <code>Auth</code> API from a React Material button. </p>
<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">MouseEvent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">onSignOut</span><span class="p">(</span><span class="nx">event</span>: <span class="kt">MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLButtonElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="nx">Auth</span>
        <span class="p">.</span><span class="nx">signOut</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>


<p>We'll need to left-align the button.</p>
<div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">useStyles</span> <span class="o">=</span> <span class="nx">makeStyles</span><span class="p">((</span><span class="nx">theme</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// top, right, bottom, left</span>
        <span class="nx">margin</span>: <span class="kt">theme.spacing</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">title</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">flexGrow</span>: <span class="kt">1</span>
    <span class="p">}</span>
<span class="p">}));</span>
</code></pre></div>


<p>And tie everything together</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;&gt;</span>
            <span class="o">&lt;</span><span class="nx">AppBar</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;inherit&quot;</span> <span class="nx">position</span><span class="o">=</span><span class="s2">&quot;static&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">Toolbar</span><span class="o">&gt;</span>
<span class="hll">                    <span class="o">&lt;</span><span class="nx">Typography</span> <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;h4&quot;</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classes</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Welcome</span> <span class="nx">to</span> <span class="nx">C</span><span class="o">-</span><span class="mi">19</span> <span class="nx">Autobody</span><span class="o">&lt;</span><span class="nx">Typography</span><span class="o">&gt;</span>
</span><span class="hll">                    <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSignOut</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Sign</span> <span class="nx">out</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span>                <span class="o">&lt;</span><span class="err">/Toolbar&gt;</span>
                <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
                    <span class="p">...</span>
</code></pre></div>


<p><img alt="Better sign out" src="../assets/screenshots/better-sign-out.png" /></p>
<p>Nice.</p>
<h2 id="make-a-login-screen-for-react-material">Make a login screen for React Material<a class="headerlink" href="#make-a-login-screen-for-react-material" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There's a lot written about this. But none of it quite works for React Material, or works at with hte versions of Amplify and REact we're using here. See <a href="https://blog.logrocket.com/authentication-react-apps-aws-amplify-cognito/">Here</a>, <a href="https://blog.kylegalbraith.com/2020/03/31/customizing-the-aws-amplify-authentication-ui-with-your-own-react-components/">here</a>, <a href="https://medium.com/@howitson/how-i-managed-to-customize-aws-amplify-login-screens-8d85d0967849">here</a>, <a href="https://dev.to/dabit3/the-complete-guide-to-user-authentication-with-the-amplify-framework-2inh">here</a>, and <a href="https://blog.logrocket.com/authentication-react-apps-aws-amplify-cognito/">here</a> for some of the closest we found. There are many more.</p>
</div>
<h2 id="use-the-hosted-federated-login">Use the hosted federated login<a class="headerlink" href="#use-the-hosted-federated-login" title="Permanent link">&para;</a></h2>
<p>You can follow the instructions <a href="https://docs.amplify.aws/lib/auth/social/q/platform/js">https://docs.amplify.aws/lib/auth/social/q/platform/js</a> to make this work. You'll need access to developer accounts in Facebook or Google to create applications to use in the OAuth integration.</p>
<p>When you're done, it looks something like</p>
<p><img alt="Federated Authentication UI" src="../assets/screenshots/hosted-signin-ui.png" /></p>
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>var disqus_config=function(){this.page.url="https://stephen-cloud.github.io/c-19-autobody/authentication/",this.page.identifier="authentication/"};!function(){var e=document,i=e.createElement("script");i.src="//c19-autobody.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)}()</script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../amplify/" title="Add AWS Amplify" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Add AWS Amplify
              </div>
            </div>
          </a>
        
        
          <a href="../prepare-ui/" title="Prepare the UI" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Prepare the UI
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Stephen Harrison
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>